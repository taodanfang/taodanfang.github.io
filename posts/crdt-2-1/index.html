<!DOCTYPE html>
<html lang="" dir="ltr">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>CRDTåè®®åŸºç¡€çŸ¥è¯†(2) - LogootåŸç† &middot; CC-Tableï¼š ä¸“æ³¨ååŒè®¡ç®—æŠ€æœ¯ç ”å‘</title>
  <meta name="description" content="" />
  <link href="https://taodanfang.github.io/css/katex.css" rel="stylesheet">
  
  
  
  
  <link href="https://taodanfang.github.io/css/concated.min.css" rel="stylesheet">
  
  


</head>


  <body > 
    <div style="position: fixed; z-index: 500;
    width: 100vw; background-color: black; color: white;
    box-shadow: 0 0.4rem 2rem 0 rgba(0,0,0,0.2);">
        
<nav class="nav-bar side-padding" style="max-width: 100vw;"
>
  <h1 class="nav-header"><a href="https://taodanfang.github.io" 
    class="nav-text" style="color: wheat;">ç†™ç†™è¡¨æ ¼</a></h1>
 
  <h3 class="nav-header nav-text" 
  >
  <a href="#single-page-head" style="font-size: 18px; color:lightgreen; padding-top: 4px;">  CRDTåè®®åŸºç¡€çŸ¥è¯†(2) - LogootåŸç†</a>

</h3>
  
  <div class="hamburger-menu">
    <button onclick="hamburgerMenuPressed.call(this)" aria-haspopup="true" aria-expanded="false" aria-controls="menu" aria-label="Menu">
      <span  style="background-color: wheat;"></span>
      <span  style="background-color: wheat;"></span>
    </button>
    <ul id="menu" class="hamburger-menu-overlay">
      <li><a href="https://taodanfang.github.io" class="hamburger-menu-overlay-link">Home</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/bleve/" class="hamburger-menu-overlay-link">bleve</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/boltdb/" class="hamburger-menu-overlay-link">boltdb</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/casbin/" class="hamburger-menu-overlay-link">casbin</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/cc-table/" class="hamburger-menu-overlay-link">cc-table</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/channel/" class="hamburger-menu-overlay-link">channel</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/context/" class="hamburger-menu-overlay-link">context</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/crdt/" class="hamburger-menu-overlay-link">CRDT</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/d2admin/" class="hamburger-menu-overlay-link">d2admin</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/deployment/" class="hamburger-menu-overlay-link">deployment</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/distributed-computing/" class="hamburger-menu-overlay-link">distributed computing</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/drag-and-drop/" class="hamburger-menu-overlay-link">drag and drop</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/event/" class="hamburger-menu-overlay-link">event</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/go/" class="hamburger-menu-overlay-link">go</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/golang/" class="hamburger-menu-overlay-link">golang</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/goroutine/" class="hamburger-menu-overlay-link">goroutine</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/iot/" class="hamburger-menu-overlay-link">iot</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/kit/" class="hamburger-menu-overlay-link">kit</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/math/" class="hamburger-menu-overlay-link">math</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/microservice/" class="hamburger-menu-overlay-link">microservice</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/mongodb/" class="hamburger-menu-overlay-link">mongodb</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/nats/" class="hamburger-menu-overlay-link">nats</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/page/" class="hamburger-menu-overlay-link">page</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/practice/" class="hamburger-menu-overlay-link">practice</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/pubsub/" class="hamburger-menu-overlay-link">pubsub</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/rule/" class="hamburger-menu-overlay-link">rule</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/schedule/" class="hamburger-menu-overlay-link">â€œschedule&#34;</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/search/" class="hamburger-menu-overlay-link">search</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/socket.io/" class="hamburger-menu-overlay-link">socket.io</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/task/" class="hamburger-menu-overlay-link">task</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/tenant/" class="hamburger-menu-overlay-link">tenant</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/tree/" class="hamburger-menu-overlay-link">tree</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/vue/" class="hamburger-menu-overlay-link">vue</a></li>
      
      <li><a href="https://taodanfang.github.io/categories/websocket/" class="hamburger-menu-overlay-link">websocket</a></li>
      
      
    </ul>
  </div>
</nav>



    </div>

    <div class="single-body">
      <main id="single-page-head" class="content side-text-padding" style="margin-top: 108px;">
        <article class="post dropcase">
          <header class="post-header">

            <h1 class="post-title" >CRDTåè®®åŸºç¡€çŸ¥è¯†(2) - LogootåŸç†</h1>
            
            <div class="nav-bar">
              <p class="post-date">
                Posted 
                <time datetime="2021-01-28">Jan 28, 2021</time>
              </p>

              <div>
                <span style="font-size: 14px; padding-top: 0px;;"
                 id="busuanzi_container_site_uv">
                æœ¬ç«™è®¿å®¢æ•°
                <span style="padding-left: 4px; padding-right: 4px; color: red;"
                id="busuanzi_value_site_uv"></span> äººæ¬¡, 
                </span>
                <span style="font-size: 14px; padding-bottom: 10px;;"
                id="busuanzi_container_page_pv">
                    æœ¬æ–‡æ€»é˜…è¯»é‡
                    <span style="padding-left: 4px; padding-right: 4px; color: red;"  
                    id="busuanzi_value_page_pv"></span> æ¬¡
                </span>
              </div>
            </div>
            
            

          </header>
          <picture class="post-figure">
            
            
            
            <source srcset="https://taodanfang.github.io/posts/crdt-2-1/img-1_hu6869e2fbd1c45097e86bb3b7805c872b_70971_711x0_resize_q75_lanczos.jpeg 1x, https://taodanfang.github.io/posts/crdt-2-1/img-1_hu6869e2fbd1c45097e86bb3b7805c872b_70971_1422x0_resize_q75_lanczos.jpeg 2x, https://taodanfang.github.io/posts/crdt-2-1/img-1_hu6869e2fbd1c45097e86bb3b7805c872b_70971_2133x0_resize_q75_lanczos.jpeg 3x">
            <img src="https://taodanfang.github.io/posts/crdt-2-1/img-1_hu6869e2fbd1c45097e86bb3b7805c872b_70971_711x0_resize_q75_lanczos.jpeg" >
          </picture>
          


          

          <div class="next-post"  style="min-width: 250px;" >
            
            <a ontouchstart="cardPressed.call(this)" ontouchend="cardReleased.call(this)" ontouchmove="cardReleased.call(this)" 
  href="https://taodanfang.github.io/posts/crdt-1-1/" class="card blog-card bc-next" rel="bookmark" >

  <article class="card-body">
    <h2 class="card-title">CRDTåè®®åŸºç¡€çŸ¥è¯†(1) - åŸºæœ¬å®ç°æ¡†æ¶</h2>
    <p class="card-text">èƒŒæ™¯ 2016å¹´3æœˆï¼ŒGoogleä¸Šçº¿çš„Google Docsï¼ŒååŒæ–‡æ¡£çš„è¯ç”Ÿï¼Œæ— ç–‘ç»™åŸºäºäº’è”ç½‘çš„æ²Ÿé€šåä½œå¸¦æ¥äº†ä¸€åœºé©å‘½ã€‚
1984 å¹´ï¼ŒMIT çš„ç§‘å­¦å®¶æå‡ºäº†è®¡ç®—æœºæ”¯æŒçš„ååŒå·¥ä½œï¼ˆComputer Supported Cooperative Workï¼Œç¼©å†™ä¸º CSCWï¼‰ï¼Œä½¿å¾—äººä»¬å¯ä»¥å€ŸåŠ©è®¡ç®—æœºå’Œäº’è”ç½‘å»å®ŒæˆååŒå·¥ä½œã€‚
</p>
    <div class="card-subtext muted-text">
      <p>Posted <time datetime="2021-01-27 127:00">Jan 27, 2021</time></p>
      <p>#CRDT </p>
    </div>
  </article>
</a>
            
          </div>

          <p>å°è¯•å°†CRDTåº”ç”¨äºåŸºäºå—(block)çš„ååŒæ–‡æ¡£(xml)ç¼–è¾‘åœºæ™¯ï¼Œæä¾›äº†ä¸€ä¸ªè¯¦ç»†çš„åŸå‹ç³»ç»Ÿå®ç°å‚è€ƒï¼ŒåŸå‹ç³»ç»ŸåŸºäºLogooté¡¹ç›®æ‰©å±•ï¼Œæä¾›äº†blockæ“ä½œã€‚ç³»ç»Ÿçš„å®¢æˆ·ç«¯æ˜¯Fontoï¼Œä¸€æ¬¾æ”¯æŒXMLç¼–è¾‘çš„å·¥å…·è½¯ä»¶ã€‚</p>
<h2 id="introduction">Introduction</h2>
<p>CRDT äº2011å¹´é¦–æ¬¡æ­£å¼æå‡ºï¼Œæœ€åˆç”¨äºå®ç°ååŒæ–‡æœ¬ç¼–è¾‘å’Œç§»åŠ¨è®¡ç®—ã€‚</p>
<h2 id="ç ”ç©¶æŠ¥å‘Š">ç ”ç©¶æŠ¥å‘Š</h2>
<h3 id="what-does-conflict-free-mean"><strong>What does conflict-free mean?</strong></h3>
<p>â€æ— å†²çªâ€œæ„å‘³ç€ï¼Œç³»ç»Ÿå¯ä»¥è‡ªåŠ¨æ£€æµ‹å¹¶å‘æ›´æ–°ï¼Œå¹¶è‡ªåŠ¨åšå‡ºç¡®å®šæ€§çš„å†²çªè§£å†³æ–¹æ¡ˆï¼ŒåŸºäºæ‰€é‡‡ç”¨çš„æ•°æ®ç»“æ„ä¸­çš„å…ƒæ•°æ®ï¼Œæ€»èƒ½ä¿è¯å…¨å±€çŠ¶æ€ä¸€è‡´ã€‚</p>
<p>ä¸€ä¸ªæ­£ç¡®çš„ååŒCRDTç³»ç»Ÿï¼Œåº”å½“æ»¡è¶³å¦‚ä¸‹æ ‡å‡†ï¼š</p>
<ul>
<li>Causalityï¼ˆå› æœæœ‰åºï¼‰: All operations are ordered by a precedence relation</li>
<li>Convergenceï¼ˆæœ€ç»ˆä¸€è‡´ï¼‰: The system converges if all replicas are identical when the system is idle.</li>
<li>Intentionï¼ˆæ„å›¾åæ˜ ï¼‰: The expected effect of an operation should be observed on all replicas.</li>
</ul>
<p>CRDTçš„æ ¸å¿ƒæ•°æ®ç»“æ„åŒ…æ‹¬ï¼šsetï¼Œregisterï¼Œcounterã€‚åŸºäºè¿™äº›åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥æ„é€ å‡ºæ›´å¤šå¤æ‚çš„æ•°æ®ç±»å‹ï¼Œä¾‹å¦‚ï¼štreeï¼Œmapï¼Œgraphç­‰ç­‰</p>
<h3 id="what-does-replication-mean"><strong>What does replication mean?</strong></h3>
<p>å‰¯æœ¬å¤„ç†æœºåˆ¶ï¼Œå¤§ä½“å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š</p>
<ul>
<li>
<p>æ‚²è§‚å‰¯æœ¬æœºåˆ¶ï¼šå„ä¸ªå‰¯æœ¬çš„å†…å®¹å®Œå…¨ä¸€è‡´ï¼Œç³»ç»Ÿéœ€è¦ç¡®ä¿å‰¯æœ¬å†…å®¹æ˜¯æœ€æ–°çš„</p>
</li>
<li>
<p>ä¹è§‚å‰¯æœ¬æœºåˆ¶ï¼šå®¢æˆ·å¯ä»¥è¯»å†™åŒä¸€å‰¯æœ¬çš„ä¸åŒç‰ˆæœ¬ï¼Œç³»ç»Ÿéœ€è¦é‡ç‚¹è€ƒè™‘æ­¤ç±»å‰¯æœ¬</p>
</li>
<li>
<p>æ´»è·ƒï¼ˆåŒæ­¥ï¼‰å‰¯æœ¬æœºåˆ¶ï¼šåŸå§‹å‰¯æœ¬è´£ä»»è€…ï¼Œéœ€è¦è´Ÿè´£å®ç°ä¸å…¶ä»–å‰¯æœ¬çš„åŒæ­¥</p>
</li>
<li>
<p>è¢«åŠ¨ï¼ˆå¼‚æ­¥ï¼‰å‰¯æœ¬æœºåˆ¶ï¼šå‰¯æœ¬éœ€è¦è·å¾—å…¨éƒ¨æ›´æ–°</p>
</li>
<li>
<p>é¢å‘æ“ä½œçš„å‰¯æœ¬æœºåˆ¶ vs é¢å‘çŠ¶æ€çš„å‰¯æœ¬æœºåˆ¶ï¼šæ ¹æ®é€šä¿¡å¼€é”€å’Œç©ºé—´å¼€é”€ï¼Œè¿›è¡Œé€‰æ‹©åˆé€‚çš„â€å‰¯æœ¬æœºåˆ¶â€œ</p>
</li>
</ul>
<h3 id="ot-vs-crdt"><strong>OT vs. CRDT</strong></h3>
<p>å½“å‰ OT ä¸»è¦åº”ç”¨äºååŒç¼–è¾‘ï¼ŒOTçš„ä¼˜åŠ¿æ˜¯å¯ä»¥ç¡®ä¿æœ€ç»ˆä¸€è‡´æ€§ï¼Œå¹¶ä¸”ç”¨æˆ·ä½“éªŒè¾ƒå¥½ï¼Œé€‚ç”¨äºè½»é‡çº§å®¢æˆ·ç«¯ã€‚ç¼ºç‚¹åŒ…æ‹¬ï¼š1ï¼‰OTçš„è½¬ç§»å‡½æ•°éå¸¸å¤æ‚ï¼Œè€Œä¸”å®¹æ˜“é€ æˆç©ºé—´çˆ†ç‚¸ï¼›2ï¼‰OT éœ€è¦é‡‡ç”¨ä¸­å¿ƒæœåŠ¡å™¨æ¶æ„ï¼Œå®¹æ˜“å¯¼è‡´å•ç‚¹æ•…éšœå’Œæ•°æ®æ³„éœ²é£é™©ï¼›3ï¼‰å¯æ‰©å±•æ€§è¾ƒå·®ï¼Œä¸é€‚åˆäºäº‘è®¡ç®—ç¯å¢ƒã€P2Pç¯å¢ƒå’ŒåŠ¨æ€ç¾¤ç»„ç¯å¢ƒã€‚4) OT è¦æ±‚å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¿æŒå¸¸è¿æ¥åœ¨çº¿çŠ¶æ€ã€‚</p>
<p>CRDTæ˜¯ä¸€ç§æ–°å‹çš„å‰¯æœ¬ä¸€è‡´ä¿è¯æœºåˆ¶ï¼Œå…‹æœäº†OTçš„ä¸€äº›ä¸è¶³ï¼Œå¦‚ï¼š1ï¼‰å¯æ‰©å±•æ€§è¾ƒå¥½ï¼Œä¸è¦æ±‚é‡‡ç”¨ä¸­å¿ƒæœåŠ¡å™¨æ¶æ„ï¼Œæ›´æ˜“äºé€‚åº”å¤§è§„æ¨¡ç”¨æˆ·å’ŒP2Pç¯å¢ƒï¼›2ï¼‰ä¸è¦æ±‚å®¢æˆ·ç«¯ä¿æŒè¿æ¥çŠ¶æ€ï¼›3ï¼‰ç®—æ³•å¤æ‚åº¦å’Œå¼€é”€è¾ƒä½ï¼Œæ”¹è¿›ç©ºé—´è¾ƒå¤§ï¼›å…¶ç¼ºç‚¹åŒ…æ‹¬ï¼š1ï¼‰æ”¯æŒçš„æ•°æ®ç±»å‹è¾ƒå°‘ï¼›2ï¼‰æ”¯æŒçš„æ“ä½œç±»å‹è¾ƒå°‘ï¼ˆä¸»è¦æ˜¯delete, insertï¼‰ï¼›3ï¼‰ç”¨æˆ·ä½“æ£€è¾ƒOTå·®ä¸€äº›ã€‚</p>
<p><img src="image-20210203121015718.png" alt="image-20210203121015718"></p>
<h3 id="é¢å‘æ“ä½œçš„commutative-crdt">é¢å‘æ“ä½œçš„Commutative-CRDT</h3>
<p>åŸºæœ¬æ€æƒ³ï¼šä»…ä»…å‘é€å®¢æˆ·å¯¹å‰¯æœ¬çš„æ“ä½œåºåˆ—ï¼Œå…¶ä»–å®¢æˆ·ä¾æ®å…¶æœ¬åœ°æ“ä½œå’Œæ”¶åˆ°å¹¿æ’­æ“ä½œï¼Œæ›´æ–°æœ¬åœ°å‰¯æœ¬çš„çŠ¶æ€</p>
<p>å…³é”®é—®é¢˜æ˜¯ï¼Œå¯¹æ“ä½œåºåˆ—çš„æ’åºï¼ˆå…¨åºï¼‰ï¼Œå¯ä»¥åŸºäºæ—¶é—´æˆ³è¿›è¡Œï¼Œå¯ä»¥é‡‡ç”¨çš„æ–¹æ³•æœ‰ï¼šé€»è¾‘æ—¶é’Ÿï¼ŒNTPç‰©ç†æ—¶é’Ÿï¼ŒçœŸå®æ—¶é—´ï¼ˆGPSï¼‰ï¼Œä»¥åŠæ··åˆé€»è¾‘æ—¶é’Ÿ</p>
<p>ä¸»è¦ä¸è¶³æ˜¯ï¼š1ï¼‰æ¯ä¸ªæ“ä½œä»…ä»…è¢«å‘é€ä¸€æ¬¡ï¼Œé‚€è¯·æ¯ä¸ªæ¶ˆæ¯éƒ½å¿…é¡»è¢«å®¢æˆ·æ”¶åˆ°ï¼›2ï¼‰åœ¨åŒæ—¶æ”¶åˆ°å¤šä¸ªæ“ä½œçš„æƒ…å†µä¸‹ï¼Œå¯¹äºè§£å†³å†²çªé€ æˆå¾ˆå¤§å›°éš¾</p>
<p>ä¸»è¦ä¼˜ç‚¹æ˜¯ï¼šç©ºé—´å¼€é”€è¾ƒå°ï¼Œæ˜“äºè¿›è¡Œå†å²è¿½è¸ª</p>
<h3 id="é¢å‘çŠ¶æ€çš„convergent-crdt">é¢å‘çŠ¶æ€çš„Convergent-CRDT</h3>
<p>åŸºæœ¬æ€æƒ³ï¼šæ‰€æœ‰å‰¯æœ¬äº’ç›¸å‘é€è‡ªå·±çš„çŠ¶æ€ç»™å…¶ä»–å‰¯æœ¬</p>
<p>ä¸»è¦é—®é¢˜æ˜¯ï¼Œéœ€è¦è¿›è¡ŒçŠ¶æ€åˆå¹¶æ“ä½œ</p>
<blockquote>
<p>The merge method must conform to three properties: commutativity, associativity, and idempotency. The properties commutativity and associativity essentially points out that the order of the merge operations does not matter, since a state can be achieved through multiple different ways. The property idempotency states that it is not needed to care about potential duplicates.</p>
</blockquote>
<p>ä¸ºäº†è·Ÿè¸ªå‰¯æœ¬å¯¹è±¡çš„çŠ¶æ€ï¼Œéœ€è¦é‡‡ç”¨å‘é‡æ—¶é’Ÿï¼Œå¯¼è‡´ç©ºé—´å¼€é”€è¾ƒå¤§ã€‚ç”±äºéœ€è¦å‘é€å‘é‡æ—¶é’Ÿï¼Œé€šä¿¡å¼€é”€è¾ƒå¤§ã€‚è¿™äº›é—®é¢˜ï¼Œéœ€è¦å‚è€ƒã€Šåˆ†å¸ƒå¼è®¡ç®—ç®—æ³•ã€‹è¿›è¡Œè§£å†³ã€‚</p>
<h3 id="cmcrdt-ä¸-cvcrdt-çš„é€‰æ‹©">cmCRDT ä¸ cvCRDT çš„é€‰æ‹©</h3>
<p>é€‰æ‹©ä¾æ®ï¼Œä¸»è¦æ˜¯åº”ç”¨åœºæ™¯å’Œç‰¹æ€§è¦æ±‚ã€‚</p>
<p>cmCRDTï¼šé€šä¿¡å¼€é”€å°ï¼Œå¯ä»¥è¿›è¡Œå†å²å›æ”¾ï¼Œä½†è¦æ±‚ç½‘ç»œç¯å¢ƒè¾ƒé«˜</p>
<p>cvCRDTï¼šé€šä¿¡å¼€é”€ã€ç©ºé—´å¼€é”€è¾ƒå¤§ï¼Œå½’å¹¶ç®—æ³•å®ç°éš¾åº¦è¾ƒå¤§ï¼Œä½†å¯¹ç½‘ç»œç¯å¢ƒè¦æ±‚è¾ƒä½</p>
<h3 id="crdtç®—æ³•ä¸ç³»ç»Ÿ">CRDTç®—æ³•ä¸ç³»ç»Ÿ</h3>
<table>
<thead>
<tr>
<th>ç®—æ³•</th>
<th>è¦ç‚¹</th>
<th>åœºæ™¯</th>
</tr>
</thead>
<tbody>
<tr>
<td>Tree-based CRDT</td>
<td>Every element is a node. There are one or more root nodes and every node has zero or more children. When using trees, operations may not only have effect on the element itself, but also on the children of the element</td>
<td></td>
</tr>
<tr>
<td>Set-based CRDT</td>
<td>Set consists of elements at least contain a unique ID. This ID might be a tag or position ID.</td>
<td></td>
</tr>
<tr>
<td>G-counter</td>
<td>A counter is a replicated integer supporting operations such as increment, decrement and value to query it. The G-counter, also known as the state-based increment-only counter, does not make use of the decrement operation.</td>
<td>be useful for peer to peer applications which counts certain attributes, such as likesï¼ˆæŠ•ç¥¨ï¼‰</td>
</tr>
<tr>
<td>PN-Counter</td>
<td>A commutative CRDT which is practically the same as the G-Counter, but with an additional feature to decrement the counter.</td>
<td>be used in applications such as Skype for counting the numbers of logged in users.ï¼ˆåœ¨çº¿äººæ•°ï¼‰</td>
</tr>
<tr>
<td>Non-Negative-Counter</td>
<td>A non-negative counter is a counter that can only be positive</td>
<td>be used to count the remaining credits of an avatar</td>
</tr>
<tr>
<td>Growth Only Set</td>
<td>A CRDT where only elements can be added</td>
<td></td>
</tr>
<tr>
<td>2P-Set</td>
<td>A 2P-Set CRDT is a CRDT with the same functionality as a G-set CRDT, but with the remove functionality added</td>
<td></td>
</tr>
<tr>
<td>U-Set</td>
<td>The simplified version of 2P-set under two assumptions. If elements are unique, a removed element will never be added again.</td>
<td></td>
</tr>
<tr>
<td>Last-Writer-Wins-Element-Set (LWW)</td>
<td>Based on timestamps. All operations and elements in the CRDT get a timestamp assigned and all operations will be executed in the order of the timestamps</td>
<td></td>
</tr>
<tr>
<td>Observed Remove Set</td>
<td>Each element will get a unique tag. This tag is now used to add or remove elements and since each tag is unique, no conflicts should occur. However, one constraint is that operations should be executed in a causal order at every CRDT.</td>
<td></td>
</tr>
<tr>
<td>PN-Set</td>
<td></td>
<td>is used for collaborative editing sets</td>
</tr>
<tr>
<td>Sequence CRDTs</td>
<td>Sequence CRDTs are sequences, lists or ordered sets CRDTs. Sequence CRDTs have a lot of different implementations such as treedoc, RGA, WOOT, Logoot, LSEQ and many more.</td>
<td>These CRDTs can be used to build a collaborative text-editor.ï¼ˆååŒç¼–è¾‘ï¼‰</td>
</tr>
</tbody>
</table>
<p>ä»¥ä¸Šç®—æ³•çš„<strong>å…±åŒæ€æƒ³</strong>ï¼š</p>
<p>æ¯ä¸ªå…ƒç´ è·å¾—ä¸€ä¸ªå”¯ä¸€çš„ä½ç½®åæ ‡ï¼ˆæ–‡æ¡£ä¸­ï¼‰ï¼Œå¹¶ä¿å­˜åœ¨æŸå¤„ã€‚å¢åŠ ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œä¼šåˆ†é…ä¸€ä¸ªå”¯ä¸€çš„åæ ‡ï¼Œå¹¶è¢«åŠ å…¥åˆ°ä¿å­˜åæ ‡ä¿¡æ¯çš„æ•°æ®ç»“æ„ä¸­ã€‚åˆ é™¤ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œæˆ–è€…åˆ é™¤ä¸€ä¸ªå¯¹åº”çš„æ•°æ®ç»“æ„ï¼Œæˆ–è€…åˆ é™¤ä¸€ä¸ªåæ ‡ä¿¡æ¯ï¼ˆæ ‡è®°ä¸ºåˆ é™¤ï¼‰ã€‚</p>
<h2 id="logoot-åŸç†">Logoot åŸç†</h2>
<h3 id="æ•°æ®ç»“æ„">æ•°æ®ç»“æ„</h3>
<ul>
<li>Logoot åŸºäºæ ‘ç»“æ„æ¥å®ç°</li>
<li>åˆå§‹åŒ–ä¸€ä¸ªlogootå®ä¾‹ä¼šåˆ›å»ºä¸€æ£µæ–‡æ¡£æ ‘ï¼ŒåŒ…å«ä¸€ä¸ªrootèŠ‚ç‚¹ï¼Œå’Œä¸¤ä¸ªå­èŠ‚ç‚¹(start, end)ï¼Œåˆ†åˆ«ä»£è¡¨æ–‡æ¡£çš„å¼€å§‹å’Œç»“æŸ</li>
</ul>
<p><img src="./image-20210128194118878.png" alt="image-2"></p>
<ul>
<li>æ¯ä¸ªç»“ç‚¹éƒ½åˆ†é…äº†ä¸€ä¸ªæ ‡è¯†ï¼Œç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š
<ul>
<li>IDï¼Œæ•´å‹æ•°å€¼ï¼Œç”¨äºæ ‡è¯†ç»“ç‚¹ä½ç½®ä¿¡æ¯</li>
<li>siteï¼Œå­—ç¬¦ä¸²ï¼Œç”¨äºæ ‡è¯†å®¢æˆ·</li>
<li>clockï¼Œæ•´å‹æ•°å€¼ï¼Œä»£è¡¨æ“ä½œçš„æ•°é‡</li>
</ul>
</li>
<li>åŸºäºç»“ç‚¹çš„æ ‡è¯†ï¼Œå¯ä»¥ç¡®å®šè¯¥ç»“ç‚¹åœ¨æ–‡æ¡£æ ‘ä¸­çš„ä½ç½®ã€‚</li>
</ul>
<h3 id="åŸºæœ¬æ“ä½œ">åŸºæœ¬æ“ä½œ</h3>
<p>æ¯ä¸ªæ“ä½œ(operation)éƒ½éœ€è¦ä¸€ä¸ªå‚æ•°ï¼šindexï¼Œä¾¿äºå®šä½æ“ä½œç»“ç‚¹</p>
<blockquote>
<p>æ’å…¥ï¼šEvery insert operation must have an index, such that the CRDT knows where to insert the value. Based on the index (depth-first search), a position is generated using the identifiers of the neighbour nodes. The neighbour nodes are the current node at the given index and the node at the given ğ‘–ğ‘›ğ‘‘ğ‘’ğ‘¥ + 1. The index will firstly be checked whether it is out of bounds. When this is the case, the index of the last node will be used, such that the insertion will be performed at the end of the block. Once the two neighbour nodes have been found, the CRDT will generate a random integer for the Id, which is between the two Ids of the neighbour nodes. Cases can occur when there exists no integer between the two Ids of the neighbour nodes. In these cases, the node would be inserted into the tree as a child of the left neighbour node and would have a randomised Id. When a node is inserted in the CRDT from one client, it emits a message containing the path (sequence of identifiers) and the content of the node. In the case of figure, the users emits the path [255, 58] (simplified to only Ids) to the other CRDTs in the network. The receiving client receives this message and builds on the exact same location a node with the same content, if there exists no node on that path. When the exact same location already contains a node, where the identifiers are exactly the same, the insert operation will be aborted. Since the clock is the operation count, an operation can only be aborted if that operation is already executed. This means that the Id, site and clock are exactly the same as the incoming operation.</p>
</blockquote>
<p><img src="image-20210128230157421.png" alt="image-3"></p>
<blockquote>
<p>åˆ é™¤ï¼šSimilar to the insert operation, the delete operation must have an index. The index will lead to a node in depth-first manner, which should be removed from the tree. However, when this node contains child nodes, the node is set to empty with an â€™emptyâ€™ attribute set to true and this node will now basically function as a tombstone. When the node does not have children, it can directly be deleted from the tree. The CRDT will recursively go over the parent nodes of this node to check if the parent can be deleted from the tree as well. If removing the node from the tree results in a tombstone parent node not having any children anymore, this parent node will also be removed from the tree. Just like the insert operation, a message is sent containing the path of the deleted node, such that the receiving client can delete the exact same node from the tree.</p>
</blockquote>
<p>æ¯ä¸ªå¹¿æ’­æ¶ˆæ¯ï¼Œéƒ½éœ€è¦ä¸€ä¸ªå‚æ•°ï¼špathï¼ˆç»“ç‚¹è·¯å¾„ï¼‰</p>
<blockquote>
<p>æ¶ˆæ¯ï¼šAs noticed, both the insert and the delete operations will send messages to other CRDTs with their respective path of the inserted or deleted node. This means that all the CRDTs will contain the exact same tree structure with the same content since all nodes will be inserted or deleted on the same path. Because all CRDTs contain the same tree structure, convergence is guaranteed.</p>
</blockquote>
<h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2>
<blockquote>
<ul>
<li>
<p>CRDTs for Fontoï¼ŒBachelor thesis at the Delft University of Technologyï¼Œ2020.7.1</p>
</li>
<li>
<p><a href="https://github.com/t-mullen/logoot-crdt">https://github.com/t-mullen/logoot-crdt</a></p>
</li>
</ul>
</blockquote>
        </article>
        

      </main>

      <nav class="end-nav">
        
        <a ontouchstart="cardPressed.call(this)" ontouchend="cardReleased.call(this)" ontouchmove="cardReleased.call(this)" 
  href="https://taodanfang.github.io/posts/crdt-1-1/" class="card blog-card" rel="bookmark" >
  
  <div class="card-img-container">
    <p class="card-img-overlay">ä¸‹ä¸€ç¯‡</p>
    <picture>
      
      
      
      <source srcset="https://taodanfang.github.io/posts/crdt-1-1/img-1_hu64d27b9e7b9cf8744283a042b04ee8fe_233303_400x0_resize_q75_lanczos.jpeg 1x, https://taodanfang.github.io/posts/crdt-1-1/img-1_hu64d27b9e7b9cf8744283a042b04ee8fe_233303_800x0_resize_q75_lanczos.jpeg 2x, https://taodanfang.github.io/posts/crdt-1-1/img-1_hu64d27b9e7b9cf8744283a042b04ee8fe_233303_1200x0_resize_q75_lanczos.jpeg 3x">
      <img src="https://taodanfang.github.io/posts/crdt-1-1/img-1_hu64d27b9e7b9cf8744283a042b04ee8fe_233303_400x0_resize_q75_lanczos.jpeg" class="card-img" >
    </picture>
  </div>
  
  <article class="card-body">
    <h2 class="card-title">CRDTåè®®åŸºç¡€çŸ¥è¯†(1) - åŸºæœ¬å®ç°æ¡†æ¶</h2>
    <p class="card-text">èƒŒæ™¯ 2016å¹´3æœˆï¼ŒGoogleä¸Šçº¿çš„Google Docsï¼ŒååŒæ–‡æ¡£çš„è¯ç”Ÿï¼Œæ— ç–‘ç»™åŸºäºäº’è”ç½‘çš„æ²Ÿé€šåä½œå¸¦æ¥äº†ä¸€åœºé©å‘½ã€‚
1984 å¹´ï¼ŒMIT çš„ç§‘å­¦å®¶æå‡ºäº†è®¡ç®—æœºæ”¯æŒçš„ååŒå·¥ä½œï¼ˆComputer Supported Cooperative Workï¼Œç¼©å†™ä¸º CSCWï¼‰ï¼Œä½¿å¾—äººä»¬å¯ä»¥å€ŸåŠ©è®¡ç®—æœºå’Œäº’è”ç½‘å»å®ŒæˆååŒå·¥ä½œã€‚
</p>
    <div class="card-subtext muted-text">
      <p>Posted <time datetime="2021-01-27 127:00">Jan 27, 2021</time></p>
      <p>#CRDT </p>
    </div>
  </article>
</a>
        
      </nav>

      
        <script src="https://utteranc.es/client.js"
        repo="taodanfang/hugoblogtalks"
        issue-term="title"
        theme="github-light"
        crossorigin="anonymous"
        async>
        </script>
      

  </div>

  <footer>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

</footer>
  
  <script defer src="https://taodanfang.github.io/js/katex.js"></script>


  <script defer src="https://taodanfang.github.io/js/auto-render.js" onload="renderMathInElement(document.body);"></script>


<script src="https://taodanfang.github.io/js/core.min.js"></script>


  <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>

  <script>
    $('#TableOfContents a').click(function () {
      console.log("click");
    var target = $(this).attr('href');
    console.log(target);
    $('html, body').animate({
       scrollTop: $(target).offset().top - 108 
     }, 500);
     return false;
    });
    $('body > div:nth-child(1) > nav > h3 > a').click(function () {
      console.log("click");
    var target = $(this).attr('href');
    console.log(target);
    $('html, body').animate({
       scrollTop: $(target).offset().top - 108 
     }, 500);
     return false;
    });
  </script>
  </body>
</html>
